<?xml version="1.0"?>
<configuration>
  <!-- Begin .netTiers Configuration Lines -->
  <configSections>
    <section name="enterpriseLibrary.ConfigurationSource" type="Microsoft.Practices.EnterpriseLibrary.Common.Configuration.ConfigurationSourceSection, Microsoft.Practices.EnterpriseLibrary.Common, Version=2.0.0.0, Culture=neutral, PublicKeyToken=null" />
    <section name="netTiersService" type="netTiers.Petshop.Data.Bases.NetTiersServiceSection, netTiers.Petshop.Data" allowDefinition="MachineToApplication" restartOnExternalChanges="true" />
    <!-- External Tools Config Section -->
    <!-- Dot Lucene Search Service -->
    <section name="petShopSearchService" type="PetShopSearchServiceSection" allowDefinition="MachineToApplication" restartOnExternalChanges="true" />
    <!-- Enterprise Library Configuration Section -->
    <!-- Atlas Configuration Section -->
    <sectionGroup name="microsoft.web" type="Microsoft.Web.Configuration.MicrosoftWebSectionGroup">
      <section name="converters" type="Microsoft.Web.Configuration.ConvertersSection" requirePermission="false" />
      <section name="webServices" type="Microsoft.Web.Configuration.WebServicesSection" requirePermission="false" />
      <section name="authenticationService" type="Microsoft.Web.Configuration.AuthenticationServiceSection" requirePermission="false" />
      <section name="profileService" type="Microsoft.Web.Configuration.ProfileServiceSection" requirePermission="false" />
    </sectionGroup>
  </configSections>
  <!-- Connection String Info -->
  <enterpriseLibrary.ConfigurationSource selectedSource="File Configuration Source">
    <sources>
      <add name="File Configuration Source" type="Microsoft.Practices.EnterpriseLibrary.Common.Configuration.FileConfigurationSource, Microsoft.Practices.EnterpriseLibrary.Common, Version=2.0.0.0, Culture=neutral, PublicKeyToken=null"
        filePath="entlib.config" />
    </sources>
  </enterpriseLibrary.ConfigurationSource>
  <connectionStrings>
    <add name="netTiersConnectionString" connectionString="server=.;uid=petshopuser;pwd=1.petshop.1;database=petshop;" />
  </connectionStrings>
  <!-- NetTiers Configuration -->
  <netTiersService defaultProvider="SqlNetTiersProvider">
    <providers>
      <!--
          *** SqlClient Provider ***
    	      connectionStringName: sqlclient connection string to the db
    	      useStoredProcedure: if trueindicates that we use the stored procedures, otherwise, we use parametrized queries that are embedded.
         -->
      <add name="SqlNetTiersProvider" type="netTiers.Petshop.Data.SqlClient.SqlNetTiersProvider, netTiers.Petshop.Data.SqlClient" connectionStringName="netTiersConnectionString" useStoredProcedure="false" providerInvariantName="System.Data.SqlClient" entityFactoryType="netTiers.Petshop.Entities.EntityFactory" enableEntityTracking="true" />
    </providers>
  </netTiersService>
  <!-- End .netTiers Configuration Lines -->
  <petShopSearchService defaultProvider="LucenePetShopSearchProvider">
    <providers>
      <add name="LucenePetShopSearchProvider" type="LucenePetShopSearchProvider" />
      <add name="LikePetShopSearchProvider" type="LikePetShopSearchProvider" />
    </providers>
  </petShopSearchService>
  <appSettings>
  </appSettings>
  <system.web>
    <!-- We define here our own SiteMapProvider -->
    <siteMap enabled="true" defaultProvider="PetShopSiteMapProvider">
      <providers>
        <add name="PetShopSiteMapProvider" type="PetShopSiteMapProvider" description="PetShop site map provider" securityTrimmingEnabled="true" />
        <add name="AdminSiteMapProvider" type="System.Web.XmlSiteMapProvider" siteMapFile="~/Admin/Web.sitemap" description="Used to build out the Admin" securityTrimmingEnabled="false" />
      </providers>
    </siteMap>
    <compilation debug="true">
      <buildProviders>
        <add extension=".asbx" type="Microsoft.Web.Services.BridgeBuildProvider" />
      </buildProviders>
      <assemblies>
        <add assembly="System.Management, Version=2.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A" />
        <add assembly="System.Design, Version=2.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A" />
        <add assembly="System.Drawing.Design, Version=2.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A" />
        <add assembly="System.Data.OracleClient, Version=2.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089" />
        <add assembly="System.Configuration.Install, Version=2.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A" />
        <add assembly="System.Runtime.Remoting, Version=2.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089" />
        <add assembly="System.Security, Version=2.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A" />
        <add assembly="System.Messaging, Version=2.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A" />
        <add assembly="stdole, Version=7.0.3300.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A" />
        <add assembly="System.Windows.Forms, Version=2.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089" />
      </assemblies>
    </compilation>
    <!-- Atlas Support -->
    <!--
          ASMX is mapped to a new handler so that proxy javascripts can also be served.
    -->
    <httpHandlers>
      <remove verb="*" path="*.asmx" />
      <add verb="*" path="*.asmx" type="Microsoft.Web.Services.ScriptHandlerFactory" validate="false" />
      <!--
          The MultiRequestHandler enables multiple requests to be handled in one
          roundtrip to the server. Its use requires Full Trust.
      -->
      <add verb="*" path="atlasbatchcall.axd" type="Microsoft.Web.Services.MultiRequestHandler" validate="false" />
      <add verb="*" path="atlasglob.axd" type="Microsoft.Web.Globalization.GlobalizationHandler" validate="false" />
      <!--
          The IFrameHandler enables a limited form of cross-domain calls to 'Atlas' web services.
          This should only be enabled if you need this functionality and you're willing to expose
          the data publicly on the Internet.
          To use it, you will also need to add the attribute [WebOperation(true, ResponseFormatMode.Json, true)]
          on the methods that you want to be called cross-domain.
          This attribute is by default on any DataService's GetData method.
          
      <add verb="*" path="iframecall.axd" type="Microsoft.Web.Services.IFrameHandler" validate="false"/>
      -->
      <add verb="*" path="*.asbx" type="Microsoft.Web.Services.ScriptHandlerFactory" validate="false" />
    </httpHandlers>
    <httpModules>
      <add name="ScriptModule" type="Microsoft.Web.Services.ScriptModule" />
      <add name="BridgeModule" type="Microsoft.Web.Services.BridgeModule" />
      <add name="WebResourceCompression" type="Microsoft.Web.Services.WebResourceCompressionModule" />
      <add name="EntityTransactionModule" type="netTiers.Petshop.Web.Data.EntityTransactionModule" />
    </httpModules>
    <authentication mode="Forms">
      <forms loginUrl="login.aspx">
        <credentials passwordFormat="Clear">
          <user name="Admin" password="1234" />
        </credentials>
      </forms>
    </authentication>
    <anonymousIdentification enabled="true" />
    <profile enabled="true" defaultProvider="AppPetShopProfileProvider">
      <providers>
        <add name="AppPetShopProfileProvider" type="PetShopProfileProvider" />
      </providers>
      <properties>
        <add name="FavoriteLanguage" type="string" allowAnonymous="true" defaultValue="en" />
        <add name="IWantPetTips" type="Boolean" allowAnonymous="true" defaultValue="false" />
        <add name="IWantMyList" type="Boolean" allowAnonymous="true" defaultValue="false" />
        <add name="FavoriteCategoryId" type="System.Nullable`1[System.Guid]" allowAnonymous="true" defaultValue="null" />
      </properties>
    </profile>
    <globalization uiCulture="auto" culture="auto" requestEncoding="utf-8" responseEncoding="utf-8" />
    <pages theme="default" enableSessionState="true" autoEventWireup="false">
      <controls>
        <add tagPrefix="data" namespace="netTiers.Petshop.Web.Data" assembly="netTiers.Petshop.Web" />
        <add tagPrefix="data" namespace="netTiers.Petshop.Web.UI" assembly="netTiers.Petshop.Web" />
        <add tagPrefix="CART" namespace="SerialCoder.Web.ShoppingCart.UI.WebControls" assembly="SerialCoder.Web.ShoppingCart" />
        <add tagPrefix="PG" namespace="SerialCoder.Pager.Web.UI.WebControls" assembly="SerialCoder.Pager" />
        <add tagPrefix="atlas" namespace="Microsoft.Web.UI" assembly="Microsoft.Web.Atlas" />
        <add tagPrefix="atlas" namespace="Microsoft.Web.UI.Controls" assembly="Microsoft.Web.Atlas" />
        <add tagPrefix="netTiers" namespace="NetTiers" assembly="App_Code" />
      </controls>
    </pages>
    <urlMappings enabled="true" />
    <membership defaultProvider="AppPetShopMemberShipProvider">
      <providers>
        <clear />
        <add name="AppPetShopMemberShipProvider" type="PetShopMemberShipProvider" applicationName="PetShop" enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="false" passwordFormat="Hashed" maxInvalidPasswordAttempts="5" passwordAttemptWindow="10" />
      </providers>
    </membership>
  </system.web>
  <!-- Resource Security -->
  <location path="Admin">
    <system.web>
      <authorization>
        <!--<deny users="*"/>-->
        <allow users="*" />
      </authorization>
    </system.web>
  </location>
  <!-- 
    Enterprise Library Configuration Section 
    Pulls Config from entlib.config in local directory.
  -->
  <!-- Enable Atlas-->
  <!-- 
      The microsoft.web section defines items required for the Atlas framework.
  -->
  <microsoft.web>
    <converters>
      <add type="Microsoft.Web.Script.Serialization.Converters.DataSetConverter" />
      <add type="Microsoft.Web.Script.Serialization.Converters.DataRowConverter" />
      <add type="Microsoft.Web.Script.Serialization.Converters.DataTableConverter" />
    </converters>
    <webServices enableBrowserAccess="true" />
    <!--
      Uncomment this line to enable the authentication service.
    <authenticationService enabled="true" />
    -->
    <!-- Uncomment these lines to enable the profile service. To allow profile properties to be retrieved 
         and modified in Atlas applications, you need to add each property name to the setProperties and 
         getProperties attributes.  If you intend for all properties to be available, you can use "*"
         as a shorthand rather than enumerating each property  -->
    <!--  
    <profileService enabled="true" 
                    setProperties="propertyname1;propertyname2" 
                    getProperties="propertyname1;propertyname2" />
    -->
  </microsoft.web>
</configuration>